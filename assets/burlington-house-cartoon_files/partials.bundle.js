/**
 * @fileoverview dragscroll - scroll area by dragging
 * @version 0.0.8
 * 
 * @license MIT, see http://github.com/asvd/dragscroll
 * @copyright 2015 asvd <heliosframework@gmail.com> 
 */
function adjustBrowseEventsPanel(){for(var u,t,n,f,e,o,s=Math.max(document.documentElement.clientWidth,window.innerWidth||0),r=document.getElementsByClassName("m-browse-events-panel"),i=0;i<r.length;i++)u=r[i],t=u.getElementsByClassName("target-category-container")[0],t!=null&&(n=t.getElementsByClassName("target-category-wrapper")[0],s>=992?n.className.indexOf("dragscroll")>=0&&(n.className=n.className.replace(" dragscroll","")):n.className.indexOf("dragscroll")<0&&(n.className=n.className+" dragscroll"),f=t.getElementsByClassName("shift-left")[0],f.disabled="disabled",e=t.getElementsByClassName("shift-right")[0],e.disabled="",o=n.getElementsByClassName("target-category-content")[0],o.style.marginLeft="0px");dragscroll.reset()}function UpdateSeeMoreIndicators(n){var i=$(n).find(".card:visible").length,r=+$(n).find(".card").length,t=i/r*100;t=Math.round(t);t>100&&(t=100);$(n).find(".x-count").html(i);$(n).find(".showing-x-of-y-indicator .x-count-line").attr("style","width:"+t+"%;");i===r?$(n).find(".see-more-loader-form button").prop("disabled",!0):$(n).find(".see-more-loader-form button").prop("disabled",!1)}function SeeMoreCards(n,t){$(n).find(".card:not(:visible)").each(function(n){n<t&&$(this).show()});UpdateSeeMoreIndicators(n)}function SeeMoreModeOnVenues(n,t){$(n).find(".see-more-loader-form:visible").length>0?($(n).data("seeMoreOn")===undefined||$(n).data("seeMoreOn")==="0")&&($(n).data("seeMoreOn","1"),$(n).find(".card").each(function(n){n>=t&&$(this).hide()})):($(n).data("seeMoreOn","0"),$(n).find(".card").each(function(){$(this).show()}));UpdateSeeMoreIndicators(n)}function adjustExhibitionVenues(){$(".c-exhibition-venues.with-see-more-loader-form").each(function(){var n=$(this).data("pageSize"),t=$(this)[0];SeeMoreModeOnVenues(t,n)})}function adjustEventListingFilter(){var t=Math.max(document.documentElement.clientWidth,window.innerWidth||0),n=document.getElementsByClassName("events-list-view-filter-wrap")[0];n&&(t>=992?(n.style.display="block",n.classList.add("active")):(n.style.display="none",n.classList.remove("active")))}function resetCardSliders(){cardSliderComponentScript.SetStartState()}function resetCardSliderElementals(){ng.element.cardSlider.SetStartState()}function updateCarouselElementals(){carouselElementalScript.AdjustCardHeights()}function resetPageSliderElementals(){pageSliderElementalScript.SetStartState()}function adjustSecondaryMenu(){$(".secondary-menu-bar .menu .dropdown").hide();$(".secondary-menu-bar .menu-main").removeClass("ms-auto");$(".secondary-menu-bar .menu-overflow .dropdown-item").each(function(){$(this).removeClass("dropdown-item").addClass("nav-item").appendTo(".secondary-menu-bar .menu-main")});var n=25,t=$(".secondary-menu-bar .menu").width();$(".secondary-menu-bar .menu .nav-item").each(function(){n+=$(this).innerWidth();n>t&&$(this).removeClass("nav-item").addClass("dropdown-item").appendTo(".secondary-menu-bar .menu-overflow")});n>t&&($(".secondary-menu-bar .menu .dropdown").show(),$(".secondary-menu-bar .menu-main").addClass("ms-auto"))}function adjustTablists(){function n(n){const e=!0;let r=n.find(".more");r.length===0&&(n.append(`
                    <div class="more dropdown">
                        <button type="button" class="button" data-bs-toggle="dropdown" aria-expanded="false">More</button>
                        <div class="overflow-container dropdown-menu dropdown-menu-end"></div>
                    </div>`),r=n.find(".more"));let l=r.outerWidth(e),o=r.find(".overflow-container");o.find("[role=tab]").each(function(){let i=$(this);t(i,n)});let s=n.innerWidth(),u=13,h=[],f=[],c=!1;n.find("[role=tab]").each(function(){let n=$(this);if(u+=n.outerWidth(e),u<=s)h.push(n);else if(f.push(n),!c){if(u-=n.outerWidth(e),u+=l,u>s){let n=h.pop();f.push(n)}c=!0}});f.sort((n,t)=>{let i=Number(n.data(TabsAutomatic.INDEX_KEY)),r=Number(t.data(TabsAutomatic.INDEX_KEY));return i-r});f.forEach(function(n){i(n,o)});f.length===0?r.hide():r.show()}function t(n,t,i=false){i?n.removeClass("dropdown-item").prependTo(t):n.removeClass("dropdown-item").appendTo(t)}function i(n,t){n&&t&&n.addClass("dropdown-item").appendTo(t)}function u(){let u=$(this),r=u.closest("[role=tablist]"),f=r.find(".overflow-container"),e=r.children("[role=tab]").last();i(e,f);t(u,r,!0);n(r)}let r=$(TabsAutomatic.SELECTOR);r.each(function(){let t=$(this);t.find("[role=tab]").each(function(n){let t=$(this);t.data(TabsAutomatic.INDEX_KEY,n)});n($(this))});$(TabsAutomatic.SELECTOR).on("click",".overflow-container [role=tab]",u)}(function(n,t){typeof define=="function"&&define.amd?define(["exports"],t):typeof exports!="undefined"?t(exports):t(n.dragscroll={})})(this,function(n){var t=window,i=document,o="mousemove",s="mouseup",h="mousedown",c="EventListener",u="add"+c,f="remove"+c,l,a,r=[],e=function(n,e){for(n=0;n<r.length;)e=r[n++],e.scrollLeft=0,e.scrollTop=0,e=e.container||e,e[f](h,e.md,0),t[f](s,e.mu,0),t[f](o,e.mm,0);for(r=[].slice.call(i.getElementsByClassName("dragscroll")),n=0;n<r.length;)(function(n,r,f,e,c,v){(v=n.container||n)[u](h,v.md=function(t){n.hasAttribute("nochilddrag")&&i.elementFromPoint(t.pageX,t.pageY)!=v||(e=1,r=t.clientX,f=t.clientY,t.preventDefault())},0);t[u](s,v.mu=function(){e=0},0);t[u](o,v.mm=function(t){e&&((c=n.scroller||n).scrollLeft-=l=-r+(r=t.clientX),c.scrollTop-=a=-f+(f=t.clientY),n==i.body&&((c=i.documentElement).scrollLeft-=l,c.scrollTop-=a))},0)})(r[n++])};i.readyState=="complete"?e():t[u]("load",e,0);n.reset=e});adjustBrowseEventsPanel();$(function(){function n(n,t){var r=$(t).find(".target-category").first().outerWidth(!0),u=$(t).find(".target-category-window").first().width(),f=Math.abs(parseInt($(t).find(".target-category-content").first().css("margin-left"))),s=Math.floor(u/r),o=8*r,h=o-(f+u),e,i;n==1&&h>0?(e=r*s,i=f+e,$(t).find(".target-category-content").first().css("margin-left",-1*i+"px"),o-(u+i)<=0&&$(t).find(".shift-right").first().prop("disabled",!0),i>0&&$(t).find(".shift-left").first().prop("disabled",!1)):n==-1&&f>0&&(e=r*s,i=f-e,$(t).find(".target-category-content").first().css("margin-left",-1*i+"px"),o-(u+i)>0&&$(t).find(".shift-right").first().prop("disabled",!1),i<=0&&$(t).find(".shift-left").first().prop("disabled",!0))}$(".m-browse-events-panel .shift-left").on("click",function(){if(!$(this).hasClass("prevent-click")){var t=$(this).closest(".m-browse-events-panel");$(t).find(".shift-left").first().addClass("prevent-click");$(t).find(".shift-right").first().addClass("prevent-click");setTimeout(function(){$(t).find(".shift-left").first().removeClass("prevent-click");$(t).find(".shift-right").first().removeClass("prevent-click")},700);n($(this).attr("data-direction"),t)}return!1});$(".m-browse-events-panel .shift-right").on("click",function(){if(!$(this).hasClass("prevent-click")){var t=$(this).closest(".m-browse-events-panel");$(t).find(".shift-left").first().addClass("prevent-click");$(t).find(".shift-right").first().addClass("prevent-click");setTimeout(function(){$(t).find(".shift-left").first().removeClass("prevent-click");$(t).find(".shift-right").first().removeClass("prevent-click")},700);n($(this).attr("data-direction"),t)}return!1})});$(function(){$(".c-competition-form.modal").each(function(){function s(u){var o=$(u),s=o.find("#"+r+" .umbraco-forms-form").first(),h=o.find("#"+r+" .umbraco-forms-submitmessage").first(),c,e,l;s.length>0?($(".umbraco-forms-form",n).replaceWith(s),t=$("form:first",n),t.validate()):h.length>0?(t.parent().hasClass("with-default-subscribe")&&($(".confirmation .original-copy").length===0&&(c='<div class="hidden original-copy">'+$(".confirmation").html()+"<\/div>",$(".confirmation").append(c)),e=$(".confirmation .original-copy").html(),l=e.replace("[%SubscribeStatusMessage]",h.html())+'<div class="hidden original-copy">'+e+"<\/div>",$(".confirmation").html(l)),y(),i(0)):f()}function h(){f()}function f(){alert("Sorry, there was a problem on our server and your competition entry could not be saved. Please try again.")}function c(){o();i(0);e();l()}function l(){t[0].reset();$("input[type=text], input[type=password], input[type=file], textarea",t).val("");$("input[type=checkbox], input[type=radio]",t).prop("checked",!1);$("select option",t).prop("selected",!1);$(".field-validation-valid, .field-validation-error",t).empty()}function a(){n.css("cursor","wait");$(".form-enter-button",n).prop("disabled",!0).css("cursor","wait")}function e(){n.css("cursor","auto");$(".form-enter-button",n).prop("disabled",!1).css("cursor","auto")}function o(){$(".terms, .terms-buttons, .confirmation, .confirmation-buttons",n).hide();$(".summary, .form, .form-buttons",n).show()}function v(){$(".summary, .form, .form-buttons, .confirmation, .confirmation-buttons",n).hide();$(".terms, .terms-buttons",n).show()}function y(){$(".summary, .form, .form-buttons, .terms, .terms-buttons",n).hide();$(".confirmation, .confirmation-buttons",n).show()}function p(){return n.hasClass("modal-desktop")?$(".col-text",n).scrollTop():n.scrollTop()}function i(t){n.hasClass("modal-desktop")?$(".col-text",n).scrollTop(t):n.scrollTop(t)}var n=$(this),r=n.attr("id"),t=$("form:first",n),u=0;n.on("show.bs.modal",function(){var t=$(window).width(),i=$(window).height();t>=992&&n.addClass("modal-desktop")});n.on("shown.bs.modal",function(){t.validate()});n.on("hide.bs.modal",function(){c()});$(".form-enter-button",n).on("click",function(){if(t.valid()){a();var i=t.attr("action"),r=t.serialize();$.ajax({type:"POST",url:i,data:r,dataType:"html",success:s,error:h,complete:e})}else $(".input-validation-error:first",n).trigger("focus")});$("a[href$='#terms']",n).on("click",function(n){n.preventDefault();u=p();v();i(0)});$(".terms-back-button",n).on("click",function(){o();i(u)})})});$(function(){$(".c-exhibition-venues.with-see-more-loader-form").each(function(){var t=$(this).data("pageSize"),n=$(this)[0];$(n).find(".see-more-loader-form button").on("click",function(){SeeMoreCards(n,t)})});adjustExhibitionVenues()});$(function(){var s,f,t,i,e,o,u,c;if($("#floorplan-map").length>0&&(s=$(".floorplan-image-map img").position().top,$(".floorplan-image-map area").each(function(){var n=$(this).attr("data-location-id");n!=undefined&&$(".location-list li[data-location-id='"+n+"']").html()!=undefined&&$(this).attr("title",'<div class="floorplan-location-tooltip-div">'+$(".location-list li[data-location-id='"+n+"']").html()+"<\/div>")}),$.widget("ui.tooltip",$.ui.tooltip,{options:{track:!0,content:function(){return $(this).prop("title")},open:function(){$(".fromLoc").hide()}}}),$(".floorplan-image-map area").tooltip(),$(document).tooltip(),f=window.location.search.toLowerCase(),f.indexOf("fromlocation")>=0&&(t=f.substring(f.indexOf("fromlocation=")+13,f.length),t.indexOf("&")>=0&&(t=t.substring(0,t.indexOf("&"))),i=$("#floorplan-map area[data-location-id='"+t+"']"),i!=undefined&&i.attr("title")!=undefined))){var n=$(i).attr("coords").split(","),h=0,r=0;if(i.attr("shape")=="rect")h=s+Math.round((+n[1]+ +n[3])/2),r=Math.round((+n[0]+ +n[2])/2);else{for(e=0,o=0,u=0;u<n.length-1;)e=e+ +n[u],o=o+ +n[u+1],u=u+2;h=s+Math.round(o/(n.length/2));r=Math.round(e/(n.length/2))}if(c=$(".p-floorplan-page").width(),r+260>c)while(r+260>c)r--;$(".floorplan-image-map").append("<div class='floorplan-location-tooltip-div fromLoc' style='left:"+r+"px;top:"+h+"px;'>"+i.attr("title")+"<\/div>")}});$(function(){"use strict";$(".c-form").each(function(){$(".umbraco-forms-field.mandatory",this).length===0&&$(".required-fields-label",this).hide()})});$(function(){function t(t){t.hide();n.trigger("focus")}var n;$(".c-highlight-paintings .show-highlight-details").on("click",function(){n=$(this);var u=n.attr("data-show-item-idx"),r=n.closest(".c-highlight-paintings"),i=r.find(".expand-content");carouselComponentScript.SetFocusObject(r[0],+u);i.show();ng.util.addModalKeyboardInteraction(i,t);$(".btn-close",i).trigger("focus")});$(".c-highlight-paintings .expand-content .btn-close").on("click",function(){var n=$(this).closest(".expand-content");t(n)})});$(function(){"use strict;";function r(n,t,i){var u=n.find(t+":visible").length,e=n.find(t).length,r=u/e*100,f,o;r=Math.round(r);r>100&&(r=100);n.find(".x-count").html(u);n.find(".showing-x-of-y-indicator .x-count-line").css("width",r+"%");u===e?n.find(".see-more-loader-form button").prop("disabled",!0):n.find(".see-more-loader-form button").prop("disabled",!1);Cookiebot&&Cookiebot.consent&&Cookiebot.consent.preferences&&(f=ng.util.sessionGet(i)||{},o=n.data("componentKey"),f[o]=u,ng.util.sessionSet(i,f))}function s(n,t,i,u){n.find(i+":not(:visible)").each(function(n){n<t&&($(this).show(),n===0&&$(this).find("a:focusable").first().trigger("focus"))});r(n,i,u)}function u(n,t){if(n.find(".see-more-loader-form").length>0){var u=n.data("pageSize"),e=n.data("componentKey"),o=ng.util.sessionGet(t)||{},i=o[e]||u,f=+n.find(".see-more-loader-form .max-count").html();i>f&&(i=f);n.find(".event-pages-list-view > li").each(function(n){n>=i&&$(this).hide()});r(n,".event-pages-list-view > li",t);n.find(".see-more-loader-form button").on("click",function(){s(n,u,".event-pages-list-view > li",t)})}}function h(n,t){if(Cookiebot&&Cookiebot.consent&&Cookiebot.consent.preferences){var r=n.data("pageSize"),u=n.data("componentKey"),i=ng.util.sessionGet(t)||{};i[u]=r;ng.util.sessionSet(t,i)}}function c(n,t){var i=n.find("input[name=ClearDateBtnLbl]").val();if(i!==undefined&&i!==""){n.find(".clear-date").html('<button class="btn btn-secondary btn-secondary-dark-gray btn-clear" data-action="show-all"><span class="visually-hidden">Clear date filter <\/span>'+i+'<i class="material-icons" aria-hidden="true">close<\/i><\/button>');n.find(".clear-date button").on("click",function(){f(n,t)})}}function t(n,t,i,r,f){var e="programmePageId="+n.data("programmePageId");i!==undefined&&i!==""&&(e+="&fromDt="+i);r!==undefined&&r!==""&&(e+="&toDt="+r);$.ajax({type:"GET",url:"/umbraco/Surface/Events/ProgrammeEvents?"+e,beforeSend:function(){},error:function(){},success:function(i){n.find(".programme-events-list-view").html(i);h(n,t);u(n,t);c(n,t);typeof f=="function"&&f(n)}})}function f(n,i){n.find('.programme-filters button[data-action="show-all"]').hasClass("active")||(n.find('.programme-filters .main-filter-btn:not([data-action="show-all"])').removeClass("active"),n.find('.programme-filters .main-filter-btn[data-action="show-all"]').addClass("active"),n.find(".clear-date").html(""),t(n,i))}function e(n){var t=n.find(".programme-filters button[data-action='show-calendar']");t.hasClass("active")?t.removeClass("active"):t.addClass("active");n.find(".calendar-picker-form-wrap").slideToggle(100,function(){if($(this).is(":visible"))$(this).find("input").first().trigger("focus");else{$(this).find(".datepicker").datepicker("setDate",null);var n=$(this).find(".datepicker").find(".ui-datepicker-current-day.ui-datepicker-today");n.removeClass("ui-datepicker-current-day")}})}function o(n){i||(i=setTimeout(function(){i=null;var t=!0;n.find(".input-validation-error").length>0?(n.find(".field-validation-error").html("<p>Please enter today's or future date in format dd/mm/yyyy.<\/p>"),t=!1):n.find(".field-validation-error").html("");n.find("input").filter(function(){return $.trim($(this).val()).length==0}).length==2&&(t=!1);t?n.find('button[data-action="apply-calendar-picker"]').prop("disabled",!1):n.find('button[data-action="apply-calendar-picker"]').prop("disabled",!0)},67))}function l(n){o(n.closest(".calendar-picker-form"))}function a(n){o(n.closest(".calendar-picker-form"))}const n="ProgrammeEvents";datepickerControlScript.InitSingleDatepickerNG(l,a);var i;$('.c-programme-events .programme-filters button[data-action="apply-calendar-picker"]').on("click",function(){var f=$(this).closest(".c-programme-events"),u=f.find('input[name="cpe-cp-from"]').val(),r,i;u!==undefined&&u!==""&&(i=$.datepicker.parseDate("dd/mm/yy",u),u=i.getFullYear()+"-"+("0"+(i.getMonth()+1)).slice(-2)+"-"+("0"+i.getDate()).slice(-2));r=f.find('input[name="cpe-cp-to"]').val();r!==undefined&&r!==""&&(i=$.datepicker.parseDate("dd/mm/yy",r),r=i.getFullYear()+"-"+("0"+(i.getMonth()+1)).slice(-2)+"-"+("0"+i.getDate()).slice(-2));t(f,n,u,r,function(n){e(n);n.find(".main-filter-btn").removeClass("active")})});$(".c-programme-events .programme-filters button[data-action='show-calendar'], .c-programme-events .calendar-picker-form-bg").on("click",function(){e($(this).closest(".c-programme-events"))});$(".c-programme-events .programme-filters button[data-action='show-all']").on("click",function(){f($(this).closest(".c-programme-events"),n)});$(".c-programme-events .programme-filters button[data-dt]").on("click",function(){if(!$(this).hasClass("active")){var i=$(this).closest(".c-programme-events");i.find('.programme-filters .main-filter-btn:not([data-dt="'+$(this).data("dt")+'"])').removeClass("active");$(this).addClass("active");i.find(".clear-date").html("");t(i,n,$(this).data("dt"),$(this).data("dt"))}});$(".c-programme-events .see-more-loader-form").each(function(){u($(this).closest(".c-programme-events"),n)});$(".c-programme-events").each(function(){t($(this),n)})});$(function(){if(ValidateEmail=function(n){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(n.toLowerCase())},$.validator.addMethod("email",function(n,t){return this.optional(t)||ValidateEmail(n)},"Please enter your email address in the form 'someone@example.com'."),ConfirmFormSubmitEnabled=function(n,t){var i=!1,r;t?i=$("#"+n).valid():(r=$("#"+n).validate(),i=r.checkForm(),r.submitted={});$("#"+n+" .subscription-newsletter-selection").length>0&&($("#"+n+" .subscription-newsletter-selection input[type=checkbox]:checked").length==0?(i=!1,$("#"+n+" .subscription-newsletter-selection .error").show()):$("#"+n+" .subscription-newsletter-selection .error").hide());i?$("#"+n+" button[type=submit]").prop("disabled",!1):$("#"+n+" button[type=submit]").prop("disabled",!0)},SubmitFormWithValidation=function(n,t){var r=new URLSearchParams(window.location.search),i;return r.has("promo")?$("#"+t+" #PromoCode").val(+r.get("promo")):(i=ng.util.getCookie("ngPromo"),i!=""&&$("#"+t+" #PromoCode").val(+i)),ConfirmFormSubmitEnabled(t,!0),$("#"+t+" button[type=submit]").prop("disabled")===!0?(n.preventDefault(),!1):(ng.ui.ShowPageLoadingOverlay(),!0)},$("#subscribe-form").length>0){$("#subscribe-form .subscription-newsletter-selection input[type=checkbox]").on("input change",function(){ConfirmFormSubmitEnabled("subscribe-form",!1)});$("#subscribe-form #Email").on("input change",function(){ConfirmFormSubmitEnabled("subscribe-form",!1)});$("#subscribe-form #FirstName").on("input change",function(){ConfirmFormSubmitEnabled("subscribe-form",!1)});$("#subscribe-form #LastName").on("input change",function(){ConfirmFormSubmitEnabled("subscribe-form",!1)});$("#subscribe-form #Password").on("input change",function(){ConfirmFormSubmitEnabled("subscribe-form",!1)});$("#subscribe-form #PasswordConfirmation").on("input change",function(){ConfirmFormSubmitEnabled("subscribe-form",!1)})}});$(function(){"use strict";$(".c-video-and-copy-block .video-wrap video").attr("tabindex","-1");$(".c-video-and-copy-block button.play-video").on("click",function(){var n=$(this).closest(".c-video-and-copy-block");n.find(".overlay-img-wrap").hide();n.find("video").attr("tabindex","0");n.find("video").first().get(0).play()})});$(function(){$("#emergency-message").on("hide.bs.modal",function(){$("#emergency-message-tab").toggle("slide",{direction:"right"},500)});$("#emergency-message").on("show.bs.modal",function(){$("#emergency-message-tab").toggle("slide",{direction:"right"},500)});var n="ngSeenEmergencyMessage",t=ng.util.getCookie(n);t===""&&($("#emergency-message").modal(),ng.util.setCookie(n,"1",0,"/"))});$(function(){var n="ngSeenEmergencyMessageStripe",t=ng.util.getCookie(n);t===""&&$("#emergency-message-stripe").css("display","block");$("#emergency-message-stripe .btn").on("click",function(){ng.util.setCookie(n,"1",0,"/");$("#emergency-message-stripe").css("display","none")})}),function(n,t){n.SessionKey="EventListing";n.PageKey="p_"+(t(".event-listing").length>0?t(".event-listing").data("contentId"):t(".c-events-listing-component").data("contentId"));n.ShowLoader=function(){t(".p-events-list-view .loading-screen").removeClass("hidden");t(".c-events-listing-component").length==0&&t("html, body").animate({scrollTop:0},0);t(".p-events-list-view").addClass("loading-screen-displayed")};n.HideLoader=function(){t(".p-events-list-view .loading-screen").addClass("hidden");t(".p-events-list-view").removeClass("loading-screen-displayed")};n.ShowFilter=function(){t(".events-list-view-filter-wrap").show();t(".events-list-view-filter-wrap").addClass("active");var i=t("#events-list-view-filter :focusable").first(),r=t("#events-list-view-filter :focusable").last();ng.util.trapFocusOn(t("#events-list-view-filter"),i,r);t("#events-list-view-filter input").first().trigger("focus");t("#events-list-view-filter").on("keydown",function(t){t.keyCode===27&&n.HideFilter()})};n.HideFilter=function(){t(".events-list-view-filter-wrap").hasClass("active")&&(t(".events-list-view-filter-wrap").removeClass("active"),t(".events-list-view-filter-wrap").hide(),ng.util.trapFocusOff(t("#events-list-view-filter")),t(".filter-button").focus())};n.UpdateQS=function(n,i,r){var o=t("#"+n).val(),u=o.split("&");r=encodeURIComponent(r);let f=0,e=0;for(;f<u.length;f++)if(u[f].startsWith(i+"=")){let n=u[f].split("=");n[1]=r;u[f]=n.join("=");e=1;break}e===0&&u.push(i+"="+r);t("#"+n).val(u.join("&"))};n.UpdateQueryString=function(t,i){n.UpdateQS("event-listing-filter-query",t,i)};n.UpdateTempQueryString=function(t,i){(t==="dtf"||t==="dtt")&&(i=i.replace("/","-").replace("/","-"));n.UpdateQS("event-listing-filter-query-temporary",t,i)};n.UpdateQSListValue=function(n,i,r,u){var s=t("#"+n).val(),f=s.split("&");let e=0,o=0;for(;e<f.length;e++)if(f[e].startsWith(i+"=")){let n=f[e].split("=");currVal=n[1]===""?[]:decodeURIComponent(n[1].split("+").join(" ")).split(",");u?currVal.push(r):currVal=jQuery.grep(currVal,function(n){return n!==r});n[1]=encodeURIComponent(currVal.join(","));f[e]=n.join("=");o=1;break}o===0&&f.push(i+"="+encodeURIComponent(r));t("#"+n).val(f.join("&"))};n.UpdateQueryStringListValue=function(t,i,r){n.UpdateQSListValue("event-listing-filter-query",t,i,r)};n.UpdateTempQueryStringListValue=function(t,i,r){n.UpdateQSListValue("event-listing-filter-query-temporary",t,i,r)};n.ChangePageSize=function(i){n.ShowLoader();n.UpdateQueryString("ps",i);n.ClearSession();document.location.search=t("#event-listing-filter-query").val()};n.SearchByTextQuery=function(i){n.ShowLoader();n.UpdateQueryString("q",t("#"+i).val());n.ClearSession();document.location.search=t("#event-listing-filter-query").val()};n.IncreasePageNo=function(i){var u=t("#list-view-results .ng-card").length,o=+t("#TotalResultsCount").val(),r=u/o*100,e;r=Math.round(r);r>100&&(r=100);t(".showing-x-of-y-mini .x-count").html(u);t(".showing-x-of-y .x-count").html(u);t(".showing-x-of-y-indicator .x-count-line").attr("style","width:"+r+"%;");u===o?t("#load-next-page button").prop("disabled",!0):t("#load-next-page button").prop("disabled",!1);var f=+t("#PageNo").val()+1,s=+t("#PageSize").val(),h=f*s;t("#PageNo").val(f);i||t("#list-view-results > li:eq("+h+") .panel-content *:focusable").first().trigger("focus");Cookiebot&&Cookiebot.consent&&Cookiebot.consent.preferences&&(e=ng.util.sessionGet(n.SessionKey)||{},e[n.PageKey]=f,ng.util.sessionSet(n.SessionKey,e))};n.LoadNextPage=function(n,i){if(t("#load-next-page button").prop("disabled")!==!0){t("#load-next-page span[role=alert]").remove();t("#load-next-page button").prop("disabled",!0);var u=+t("#PageNo").val()+1,r=t("#event-listing-filter-query").val();r=r.replace(/p=\d+/,"p="+u);t.ajax({type:"GET",url:"/umbraco/Surface/Events/EventsListViewItems?"+r,error:function(){t("#load-next-page button").prop("disabled",!1)},success:function(r){t("#list-view-results").append(r);t("#load-next-page").append('<span role="alert" class="visually-hidden">Page '+(u+1)+" now loaded.<\/span>");eventsScript.IncreasePageNo(i);eventsScript.ReAriaLabelCards();typeof n=="function"&&n()}})}};n.LoadSavedPages=function(){n.SavedCurrentPage>0&&(n.SavedCurrentPage--,n.LoadNextPage(n.LoadSavedPages,!0))};n.ReAriaLabelCards=function(){var n=t(".showing-x-of-y .y-count").html();t("#list-view-results .ng-card").each(function(i){t(this).attr("aria-label","Card "+(i+1)+" of "+n)})};n.ClearAllFilters=function(){n.ClearSession();let i=t("#events-list-view-apply-to-loc").val();i===""&&(i=document.location.pathname);t(".c-events-listing-component").length>0&&(i=i+"#"+t(".c-events-listing-component").attr("id"));document.location=i};n.ApplyTempQueryFilter=function(){n.ShowLoader();n.ClearSession();let i=t("#events-list-view-apply-to-loc").val();i===""&&(i=document.location.pathname);document.location=i+"?"+t("#event-listing-filter-query-temporary").val()};n.InitEventsFilter=function(){t("input#WhereOnline_main").on("change",function(){t(this).is(":checked")?n.UpdateTempQueryString("o","1"):n.UpdateTempQueryString("o","0")});t("input#WhereOnsite_main").on("change",function(){t(this).is(":checked")?n.UpdateTempQueryString("ng","1"):n.UpdateTempQueryString("ng","0")});t("input#WhereOtherVenue_main").on("change",function(){t(this).is(":checked")?n.UpdateTempQueryString("otv","1"):n.UpdateTempQueryString("otv","0")});t("input#IncludePaid_main").on("change",function(){t(this).is(":checked")?n.UpdateTempQueryString("nf","1"):n.UpdateTempQueryString("nf","0")});t("input#IncludeFree_main").on("change",function(){t(this).is(":checked")?n.UpdateTempQueryString("f","1"):n.UpdateTempQueryString("f","0")});t(".category-picker input").on("change",function(){n.UpdateTempQueryStringListValue("c",t(this).val(),t(this).is(":checked"))});t("#SearchQueryText-Comp").on("keyup",function(i){i.key==="Enter"?n.ApplyTempQueryFilter():n.UpdateTempQueryString("q",t(this).val())});if(t(".c-events-listing-component .p-events-list-view .clear-filter-btn").length>0){t("#list-view-results > li:first .panel-content *:focusable").first().trigger("focus");var i=t(".c-events-listing-component").offset().top-t(".top-bar").height()-20;t("html, body").animate({scrollTop:i},0)}n.ReAriaLabelCards()};n.ClearSession=function(){var t=ng.util.sessionGet(n.SessionKey)||{};delete t[n.PageKey];ng.util.sessionSet(n.SessionKey,t)}}(window.eventsScript=window.eventsScript||{},jQuery);adjustEventListingFilter();eventsScript.SavedCurrentPage=(ng.util.sessionGet(eventsScript.SessionKey)||{})[eventsScript.PageKey]||0;document.getElementById("PageNo")&&(document.getElementById("PageNo").value="0");eventsScript.LoadSavedPages(),function(n,t){function i(n,i){let e=r(n),f=t(n).data("currentPage")||1;if(i===1&&f<e.pageEdges.length?f++:i===-1&&f>1&&f--,t(n).data("currentPage",f),newMargin=e.pageEdges[f-1],t(n).find(".card-slider-cards-container").first().css("margin-left",-1*newMargin+"px"),t(n).find(".card-slider-ctrl-left button").first().prop("disabled",f<=1),t(n).find(".card-slider-ctrl-right button").first().prop("disabled",f>=e.pageEdges.length),t(n).find(".card-slider-indicator .card-slider-current-card-indicator").html(f),u(n,newMargin,e.windowWidth,e.cardGap),t(n).find(".card-slider-indicator").length>0){let i=t(n).find(".card-slider-indicator .card-slider-current-card-indicator").text(),r=t(n).find(".card-slider-indicator .card-slider-total-indicator").text();t(n).find(".live-region").text("Page "+i+" of "+r)}}function r(n){let i={cardCount:t(n).find(".card-slider-card").length,cardGap:t(n).find(".card-slider-card").first().outerWidth(!0)-t(n).find(".card-slider-card").first().outerWidth(!1),id:n.id,pageEdges:[0],stepBy:t(n).data("stepBy")||"card",windowWidth:t(n).find(".card-slider-cards-window").first().width()},r=0,u=0;return t(n).find(".card-slider-card").each(function(){let n=t(this).outerWidth(!0);r+=n;u+=n;i.stepBy=="page"?r!==i.windowWidth+i.cardGap||t(this).is(":last-of-type")?r>i.windowWidth+i.cardGap&&(i.pageEdges.push(u-n),r=n):(i.pageEdges.push(u),r=0):t(this).is(":last-of-type")||i.pageEdges.push(u)}),i}function u(n,i,r,u){let o=0;t(n).find(".card-slider-card").each(function(n,s){let h=t(this).outerWidth(!0);o-i>=0&&o+h-i<=r+u?f(s):e(s);o+=h})}function f(n){t(n).removeClass("unavailable");t(n).removeAttr("aria-hidden");t(n).find("a:not([data-fixed-tabindex])").removeAttr("tabindex")}function e(n){t(n).addClass("unavailable");t(n).attr("aria-hidden","true");t(n).find("a:not([data-fixed-tabindex])").attr("tabindex","-1")}n.SetStartState=function(){t(".card-slider-component").each(function(){let n=this;t(n).find(".card-slider-cards-container").first().css("margin-left","0px");t(n).data("currentPage",1);let i=r(n);i.pageEdges.length===1?(t(n).addClass("single-page"),t(n).find("button.card-slider-ctrl").hide(),t(n).find(".controls").hide(),t(n).find(".card-slider-indicator").length>0&&t(n).find(".card-slider-indicator").hide(),t(n).find(".card-slider-content-wrap").first().css("paddingBottom","1px"),t(n).find(".card-slider-cards-container").first().css("justifyContent","center")):(t(n).removeClass("single-page"),t(n).find("button.card-slider-ctrl").show(),t(n).find(".controls").show(),t(n).find(".card-slider-content-wrap").first().css("paddingBottom",""),t(n).find(".card-slider-cards-container").first().css("justifyContent",""),t(n).find(".card-slider-ctrl-left button").first().prop("disabled",!0),t(n).find(".card-slider-ctrl-right button").first().prop("disabled",!1),t(n).find(".card-slider-indicator").length>0&&(t(n).find(".card-slider-indicator .card-slider-total-indicator").html(i.pageEdges.length),t(n).find(".card-slider-indicator .card-slider-current-card-indicator").html("1"),t(n).find(".card-slider-indicator").show()));u(n,0,i.windowWidth,i.cardGap)})};n.InitCardSliders=function(){t(".card-slider-component").each(function(){let n=this;t(n).find("button.card-slider-ctrl").on("click",function(){let r=parseInt(t(this).attr("data-direction"));return t(this).hasClass("prevent-click")||(t(n).find("button.card-slider-ctrl").addClass("prevent-click"),setTimeout(function(){t(n).find("button.card-slider-ctrl").removeClass("prevent-click")},700),i(n,r)),!1});t(n).find(".card-slider-cards-container").css({"touch-action":"pan-y pinch-zoom"}).on("pointerdown",function(t){let r=this,u=32;r.ondragstart=()=>!1;let f=t.clientX;r.onpointerup=function(t){let e=t.clientX;e<f-u?i(n,1):e>f+u&&i(n,-1);r.onpointerup=null}})})}}(window.cardSliderComponentScript=window.cardSliderComponentScript||{},jQuery);$(function(){cardSliderComponentScript.SetStartState();cardSliderComponentScript.InitCardSliders()}),function(n,t){n.SetFocusObject=function(i,r){var u=n.GetCarouselProperties(i),e=u.itemCount,o=u.wrapAround,f=u.transition=="instant"?"carousel-object-visible-instant":"carousel-object-visible-fadein";t(i).find(".carousel-objects-wrap").each(function(){t(this).find(".carousel-object").each(function(){+t(this).attr("data-object-idx")===r?(t(this).removeClass("carousel-object-invisible"),t(this).addClass(f)):(t(this).removeClass(f),t(this).addClass("carousel-object-invisible"))})});t(i).find(".displayed-object-idx").html(r);o||(t(i).find(".shift-carousel.shift-left").prop("disabled",r<=1),t(i).find(".shift-carousel.shift-right").prop("disabled",r>=e))};n.ShiftCarousel=function(i,r){var f=n.GetCarouselProperties(i),u=f.currentItemIdx,e=f.itemCount,s=f.wrapAround,o=r>0?u+r<=e?u+r:s?1:u:u+r==0?s?e:u:u+r;o!==u&&(n.SetFocusObject(i,o),t(i).find(".live-region").text("Slide "+o+" of "+e))};n.InitCarousels=function(){t(".carousel-component").each(function(){var i=t(this)[0];t(this).find(".shift-carousel").on("click",function(){var r=parseInt(t(this).attr("data-shift-direction"));n.ShiftCarousel(i,r)});n.SetFocusObject(i,1)})};n.GetCarouselProperties=function(n){return{wrapAround:t(n).data("wrapAround"),currentItemIdx:+t(n).find(".displayed-object-idx").first().html(),itemCount:+t(n).find(".carousel-objects-count").first().html(),transition:t(n).data("transition")}}}(window.carouselComponentScript=window.carouselComponentScript||{},jQuery);$(function(){carouselComponentScript.InitCarousels()}),function(n,t){n.AdjustSingleDatepickerNGButtons=function(n,i,r,u){var f=t.datepicker.parseDate("dd/mm/yy",(new Date).getDate()+"/"+((new Date).getMonth()+1)+"/"+(new Date).getFullYear()),e=i.getFullYear(),o=i.getMonth()+1;u===e&&r===o?(n.find(".datepicker-prev").attr("disabled","disabled"),n.find(".datepicker").datepicker("getDate")===null&&n.find(".datepicker").datepicker("setDate",f)):n.find(".datepicker-prev").removeAttr("disabled")};n.ClearSingleDatepickerNG=function(n){n.datepicker("setDate",null);var t=n.find(".ui-datepicker-current-day.ui-datepicker-today");t.removeClass();t.find("a").attr("aria-current","false").removeClass("ui-state-highlight").removeClass("ui-state-active")};n.InitSingleDatepickerNG=function(i,r,u){var e=t.datepicker.parseDate("dd/mm/yy",(new Date).getDate()+"/"+((new Date).getMonth()+1)+"/"+(new Date).getFullYear()),f=""+u=="1"?t.datepicker.parseDate("dd/mm/yy","01/01/1970"):e;t(".single-date-picker-ng .datepicker").each(function(){var u=t(this).closest(".single-date-picker-ng"),o=t(this),s=u.find(".sdp-input-wrap input"),l=s.val(),h=null,c;try{c=t.datepicker.parseDate("dd/mm/yy",l);c>=f&&(h=c)}catch(a){console.log(a)}o.datepicker({minDate:f,firstDay:1,numberOfMonths:[1,1],dateFormat:"dd/mm/yy",dayNamesMin:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],altField:s,altFormat:"dd/mm/yy",onChangeMonthYear:function(t,i){n.AdjustSingleDatepickerNGButtons(u,f,i,t)},onSelect:function(){s.removeClass("input-validation-error");typeof i=="function"&&i(o)}});h===null?n.ClearSingleDatepickerNG(o):o.datepicker("setDate",h);u.find(".datepicker-next").on("click",function(n){u.find(".ui-datepicker-"+t(n.target).data("target")).trigger("click")});u.find(".datepicker-prev").on("click",function(n){u.find(".ui-datepicker-"+t(n.target).data("target")).trigger("click")});f<e&&u.find(".datepicker-prev").removeAttr("disabled");u.find(".sdp-input-wrap input").on("change input",function(){var n=t(this).val(),i=!1,u;if(n==="")i=!0;else if(n.length===10)try{u=t.datepicker.parseDate("dd/mm/yy",n);u>=f&&(o.datepicker("setDate",u),i=!0)}catch(e){console.log(e)}i?t(this).removeClass("input-validation-error"):t(this).addClass("input-validation-error");typeof r=="function"&&r(t(this))});u.find(".toggle-calendar-picker").on("click",function(){var n=t(this);u.find(".sdp-picker-wrap").slideToggle(function(){t(this).is(":visible")?n.addClass("active"):n.removeClass("active")})})})}}(window.datepickerControlScript=window.datepickerControlScript||{},jQuery);$(function(){eventsScript.InitEventsFilter()}),function(n,t){var i=null;n.ToggleExpandDetails=function(n){var i=t(n).find(".expand-object-details-displayed").html()==="1";t(n).find(".expand-details").slideToggle(700);i?(t(n).find(".expand-object-details-displayed").html("0"),t(n).find(".toggle-info-button").attr("aria-expanded","false")):(t(n).find(".expand-object-details-displayed").html("1"),t(n).find(".toggle-info-button").attr("aria-expanded","true"))};n.InitExpandAreas=function(){t(".expand-component").each(function(){var r=t(this)[0];t(this).find(".show-expand-content-action").on("click",function(){i=t(this).find("button").first();var u=t(r).find(".expand-content");u.show();ng.util.addModalKeyboardInteraction(u,n.CloseExpandContent);t(".btn-close",u).trigger("focus")});t(this).find(".toggle-info-button").on("click",function(){n.ToggleExpandDetails(r)})})};n.CloseExpandContent=function(n){n.hide();i.trigger("focus")}}(window.expandComponentScript=window.expandComponentScript||{},jQuery);$(function(){expandComponentScript.InitExpandAreas()}),function(){function t(n,t,i,r,u,f){let e=t-1;if($(n).data("currentCard",t),$(n).find('[data-card-slider-el="card"]').removeClass("selected"),$(n).find('[data-card-slider-el="card"]').eq(e).addClass("selected"),e>r?($(n).find('[data-card-slider-el="card"]').eq(i).hide(),$(n).find('[data-card-slider-el="card"]').eq(e).show(),$(n).data("visibleStartIdx",i+1),$(n).data("visibleEndIdx",r+1)):e<i&&($(n).find('[data-card-slider-el="card"]').eq(r).hide(),$(n).find('[data-card-slider-el="card"]').eq(e).show(),$(n).data("visibleStartIdx",i-1),$(n).data("visibleEndIdx",r-1)),$(n).find('[data-card-slider-el="controls"] button[data-direction="-1"]').first().prop("disabled",t<=1),$(n).find('[data-card-slider-el="controls"] button[data-direction="+1"]').first().prop("disabled",t>=u),$(n).find('[data-card-slider-el="indicator"]').length>0){$(n).find('[data-card-slider-val="current"]').html(t);let i=$(n).find('[data-card-slider-val="current"]').text(),r=$(n).find('[data-card-slider-val="total"]').text();$(n).find(".live-region").text("Item "+i+" of "+r)}let o=$(n).data("selectCardCallback");typeof o=="function"&&f&&o()}function n(n){let t=$(n).find('[data-card-slider-el="window"]').first().width(),i=$(n).find('[data-card-slider-el="card"]').first().outerWidth(!0);return{cardCount:$(n).find('[data-card-slider-el="card"]').length,visibleCardCount:t/i,id:n.id}}function i(i,r){let f=n(i),u=$(i).data("currentCard")||1;r===1&&u<f.cardCount?u++:r===-1&&u>1&&u--;let e=$(i).data("visibleStartIdx")||0,o=$(i).data("visibleEndIdx")||f.visibleCardCount-1;t(i,u,e,o,f.cardCount,!0)}window.ng=window.ng||{};window.ng.element=window.ng.element||{};window.ng.element.cardSlider=window.ng.element.cardSlider||{};ng.element.cardSlider.Init=function(r,u){typeof u=="function"&&$(r).data("selectCardCallback",u);$(r).find('[data-card-slider-el="controls"] button').on("click",function(){let n=parseInt($(this).attr("data-direction"));return i(r,n),!1});$(r).find('[data-card-slider-el="card"] button').on("click",function(){let i=n(r),u=$(r).data("visibleStartIdx")||0,f=$(r).data("visibleEndIdx")||i.visibleCardCount-1,e=$(this).closest('[data-card-slider-el="card"]'),o=$(r).find('[data-card-slider-el="card"]').index(e);return t(r,o+1,u,f,i.cardCount,!0),!1})};ng.element.cardSlider.SetStartState=function(){$('[data-elemental="card-slider"]').each(function(){let t=this,i=n(t);if($(t).data("currentCard",1),$(t).data("visibleStartIdx",0),$(t).data("visibleEndIdx",i.visibleCardCount-1),$(t).find('[data-card-slider-el="card"]').show(),$(t).find('[data-card-slider-el="card"]').removeClass("selected"),$(t).find('[data-card-slider-el="card"]').eq(0).addClass("selected"),$(t).find('[data-card-slider-el="controls"] button[data-direction="-1"]').first().prop("disabled",!0),$(t).find('[data-card-slider-el="controls"] button[data-direction="+1"]').first().prop("disabled",!1),$(t).find('[data-card-slider-el="indicator"]').length>0){$(t).find('[data-card-slider-val="current"]').html(1);let n=$(t).find('[data-card-slider-val="total"]').text();$(t).find(".live-region").text("Item 1 of "+n)}i.cardCount<=i.visibleCardCount?($(t).addClass("single-page"),$(t).find('[data-card-slider-el="controls"] button').hide(),$(t).find('[data-card-slider-el="indicator"]:not([data-visibility="always-on"])').length>0&&($(t).find('[data-card-slider-el="indicator"]:not([data-visibility="always-on"])').hide(),$(t).find('[data-card-slider-el="controls"]').hide()),$(t).find('[data-card-slider-el="card"] button').removeAttr("tabindex")):($(t).removeClass("single-page"),$(t).find('[data-card-slider-el="controls"] button').show(),$(t).find('[data-card-slider-el="controls"]').show(),$(t).find('[data-card-slider-el="controls"] button[data-direction="-1"]').first().prop("disabled",!0),$(t).find('[data-card-slider-el="controls"] button[data-direction="+1"]').first().prop("disabled",!1),$(t).find('[data-card-slider-el="indicator"]').length>0&&$(t).find('[data-card-slider-el="indicator"]').show(),$(t).find('[data-card-slider-el="card"] button').attr("tabindex","-1"))})}}();$(function(){setTimeout(function(){ng.element.cardSlider.SetStartState()},100)}),function(n,t){n.MultiTargetControls=function(){t('[data-elemental="carousel"]').each(function(){let n=this;if(t(n).find(".ng-slider-controls[data-multi-target]").length>0){let i=t(n).find(".ng-slider-controls").attr("data-multi-target");t(n).find(".ng-slider-controls .card-slider-ctrl").on("click",function(){let n=t(this).attr("data-ngbs-slide");t(i).carousel(n)})}})};n.AdjustCardHeights=function(){t('[data-elemental="carousel"]').each(function(){let n=this;if(t(n).find(".carousel-item").has("div.text").length>0){t(n).find(".carousel-item").css("height","");var i=Math.max(...t(n).find(".carousel-item").map(function(){return t(this).outerHeight()}).get());t(n).find(".carousel-item").css("height",i)}})};n.UpdateIndicators=function(){t('[data-elemental="carousel"]').each(function(){let n=this;if(t(n).find('[data-card-slider-el="indicator"]').length>0)t(n).on("slid.bs.carousel",function(){let r=t(n).find(".carousel-item").length,u=t(n).find(".carousel-item.active").index()+1;t(n).find('[data-card-slider-val="total"]').html(r);t(n).find('[data-card-slider-val="current"]').html(u);let i=t(n).find(".carousel-item.active .text").text()+"";i!==""&&(i=": "+i);t(n).find(".live-region").text("Slide "+u+" of "+r+i)})})};n.InitCarousel=function(){n.MultiTargetControls();n.AdjustCardHeights();n.UpdateIndicators()}}(window.carouselElementalScript=window.carouselElementalScript||{},jQuery);$(function(){carouselElementalScript.InitCarousel()}),function(n,t){n.AdjustSingleDatepickerNGButtons=function(n,i,r,u){var f=t.datepicker.parseDate("dd/mm/yy",(new Date).getDate()+"/"+((new Date).getMonth()+1)+"/"+(new Date).getFullYear()),e=i.getFullYear(),o=i.getMonth()+1;u===e&&r===o?(n.find(".datepicker-prev").attr("disabled","disabled"),n.find(".datepicker").datepicker("getDate")===null&&n.find(".datepicker").datepicker("setDate",f)):n.find(".datepicker-prev").removeAttr("disabled")};n.ClearSingleDatepickerNG=function(n){n.datepicker("setDate",null);var t=n.find(".ui-datepicker-current-day.ui-datepicker-today");t.removeClass();t.find("a").attr("aria-current","false").removeClass("ui-state-highlight").removeClass("ui-state-active")};n.InitSingleDatepickerNG=function(i,r,u,f){var o=t.datepicker.parseDate("dd/mm/yy",(new Date).getDate()+"/"+((new Date).getMonth()+1)+"/"+(new Date).getFullYear()),e=""+f=="1"?t.datepicker.parseDate("dd/mm/yy","01/01/1970"):o;t(".ng-date-picker .datepicker").each(function(){var f=t(this).closest(".ng-date-picker"),s=t(this),h=f.find(".ngdp-input-wrap input"),v,l,a;const c=f.find(".clear-btn");v=h.val();l=null;try{a=t.datepicker.parseDate("dd/mm/yy",v);a>=e&&(l=a)}catch(y){console.log(y)}s.datepicker({minDate:e,firstDay:1,numberOfMonths:[1,1],dateFormat:"dd/mm/yy",dayNamesMin:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],altField:h,altFormat:"dd/mm/yy",onChangeMonthYear:function(t,i){n.AdjustSingleDatepickerNGButtons(f,e,i,t)},onSelect:function(){c.show();h.removeClass("input-validation-error");typeof i=="function"&&i(s)}});l===null?n.ClearSingleDatepickerNG(s):s.datepicker("setDate",l);f.find(".datepicker-next").on("click",function(n){f.find(".ui-datepicker-"+t(n.target).data("target")).trigger("click")});f.find(".datepicker-prev").on("click",function(n){f.find(".ui-datepicker-"+t(n.target).data("target")).trigger("click")});e<o&&f.find(".datepicker-prev").removeAttr("disabled");h.on("paste input",function(){var n=t(this).val(),i=!1,u;if(n==="")i=!0;else if(n.length===10)try{u=t.datepicker.parseDate("dd/mm/yy",n);u>=e&&(s.datepicker("setDate",u),i=!0,c.show())}catch(f){console.log(f)}i?t(this).removeClass("input-validation-error"):t(this).addClass("input-validation-error");typeof r=="function"&&r(t(this))});c.on("click",function(){n.ClearSingleDatepickerNG(s);h.val("");c.hide();typeof u=="function"&&setTimeout(function(){u()},100)})})}}(window.datepickerElementalScript=window.datepickerElementalScript||{},jQuery),function(n,t){function i(n,i){let e=r(n),f=t(n).data("currentPage")||1;if(i===1&&f<e.pageEdges.length?f++:i===-1&&f>1&&f--,t(n).data("currentPage",f),newMargin=e.pageEdges[f-1],t(n).find('[data-page-slider-el="container"]').first().css("margin-left",-1*newMargin+"px"),t(n).find('[data-page-slider-el="controls"] button[data-direction="-1"]').first().prop("disabled",f<=1),t(n).find('[data-page-slider-el="controls"] button[data-direction="+1"]').first().prop("disabled",f>=e.pageEdges.length),t(n).find('[data-page-slider-val="current"]').html(f),u(n,newMargin,e.windowWidth,e.cardGap),t(n).find('[data-page-slider-el="indicator"]').length>0){let i=t(n).find('[data-page-slider-val="current"]').text(),r=t(n).find('[data-page-slider-val="total"]').text();t(n).find(".live-region").text("Page "+i+" of "+r)}}function r(n){let i={cardCount:t(n).find('[data-page-slider-el="card"]').length,cardGap:t(n).find('[data-page-slider-el="card"]').first().outerWidth(!0)-t(n).find('[data-page-slider-el="card"]').first().outerWidth(!1),id:n.id,pageEdges:[0],windowWidth:t(n).find('[data-page-slider-el="window"]').first().width()},r=0,u=0;return t(n).find('[data-page-slider-el="card"]').each(function(){let n=t(this).outerWidth(!0);r+=n;u+=n;r!==i.windowWidth+i.cardGap||t(this).is(":last-of-type")?r>i.windowWidth+i.cardGap&&(i.pageEdges.push(u-n),r=n):(i.pageEdges.push(u),r=0)}),i}function u(n,i,r,u){let o=0;t(n).find('[data-page-slider-el="card"]').each(function(n,s){let h=t(this).outerWidth(!0);o-i>=0&&o+h-i<=r+u?f(s):e(s);o+=h})}function f(n){t(n).removeClass("unavailable");t(n).removeAttr("aria-hidden");t(n).find("a:not([data-fixed-tabindex])").removeAttr("tabindex")}function e(n){t(n).addClass("unavailable");t(n).attr("aria-hidden","true");t(n).find("a:not([data-fixed-tabindex])").attr("tabindex","-1")}n.SetStartState=function(){t('[data-elemental="page-slider"]').each(function(){let n=this;t(n).find('[data-page-slider-el="container"]').first().css("margin-left","0px");t(n).data("currentPage",1);let i=r(n);i.pageEdges.length===1?(t(n).addClass("single-page"),t(n).find('[data-page-slider-el="controls"] button').hide(),t(n).find('[data-page-slider-el="controls"]').hide(),t(n).find('[data-page-slider-el="indicator"]').length>0&&t(n).find('[data-page-slider-el="indicator"]').hide()):(t(n).removeClass("single-page"),t(n).find('[data-page-slider-el="controls"] button').show(),t(n).find('[data-page-slider-el="controls"]').show(),t(n).find('[data-page-slider-el="container"]').first().css("justifyContent",""),t(n).find('[data-page-slider-el="controls"] button[data-direction="-1"]').first().prop("disabled",!0),t(n).find('[data-page-slider-el="controls"] button[data-direction="+1"]').first().prop("disabled",!1),t(n).find('[data-page-slider-el="indicator"]').length>0&&(t(n).find('[data-page-slider-val="total"]').html(i.pageEdges.length),t(n).find('[data-page-slider-val="current"]').html("1"),t(n).find('[data-page-slider-el="indicator"]').show()));u(n,0,i.windowWidth,i.cardGap)})};n.InitPageSliders=function(){t('[data-elemental="page-slider"]').each(function(){let n=this;t(n).find('[data-page-slider-el="controls"] button').on("click",function(){let r=parseInt(t(this).attr("data-direction"));return t(this).hasClass("prevent-click")||(t(n).find('[data-page-slider-el="controls"] button').addClass("prevent-click"),setTimeout(function(){t(n).find('[data-page-slider-el="controls"] button').removeClass("prevent-click")},700),i(n,r)),!1});t(n).find('[data-page-slider-el="container"]').css({"touch-action":"pan-y pinch-zoom"}).on("pointerdown",function(t){let r=this,u=32;r.ondragstart=()=>!1;let f=t.clientX;r.onpointerup=function(t){let e=t.clientX;e<f-u?i(n,1):e>f+u&&i(n,-1);r.onpointerup=null}})})}}(window.pageSliderElementalScript=window.pageSliderElementalScript||{},jQuery);$(function(){pageSliderElementalScript.SetStartState();pageSliderElementalScript.InitPageSliders()});$(function(){"use strict;";function i(n,i){n.find(".image-item:not(:visible)").each(function(n){n<i&&($(this).show(),n===0&&$(this).find("a:focusable").first().trigger("focus"))});t(n)}function r(n){n.find(".image-item").each(function(){$(this).show()});t(n)}function t(t){var r=t.find(".image-item:visible").length,f=t.find(".image-item").length,i=r/f*100,u,e;i=Math.round(i);i>100&&(i=100);t.find(".x-count").html(r);t.find(".showing-x-of-y-indicator .x-count-line").css("width",i+"%");r===f?(t.find(".see-more-loader-form button").prop("disabled",!0),t.find(".view-all-link").addClass("disabled")):t.find(".see-more-loader-form button").prop("disabled",!1);Cookiebot&&Cookiebot.consent&&Cookiebot.consent.preferences&&(u=ng.util.sessionGet(n)||{},e=t.data("componentKey"),u[e]=r,ng.util.sessionSet(n,u))}const n="RelatedPaintings";$(".m-related-paintings.with-see-more-loader-form").each(function(u){var f=$(this),o=f.data("pageSize"),e=f.data("componentKey"),s,h;e="c_"+e+"_"+u;f.data("componentKey",e);s=ng.util.sessionGet(n)||{};h=s[e]||o;f.find(".image-item").each(function(n){n>=h&&$(this).hide()});t(f);f.find(".see-more-loader-form button").on("click",function(){i(f,o)});f.find(".view-all-link").on("click",function(){$(this).hasClass("disabled")||r(f)})})}),function(){"use strict";function n(){$("#CybotCookiebotDialog").before("<div id='CookiebotDialogScreen'><\/div>");$("body").addClass("modal-open");$("#CybotCookiebotDialogBodyLevelButtonLevelOptinAllowAll").trigger("focus")}function t(){$("#CookiebotDialogScreen").remove();$("body").removeClass("modal-open")}$("#CybotCookiebotDialog").length?n():window.addEventListener("CookiebotOnDialogDisplay",function(){window.setTimeout(function(){n()},250)},!1);window.addEventListener("CookiebotOnConsentReady",function(){t()},!1);$(".cookiebot-renew").on("click",function(){typeof Cookiebot!="undefined"&&Cookiebot.renew()})}();$(function(){adjustSecondaryMenu();$(".secondary-menu-bar .nav-link[href^='#']").length>0&&$("body").scrollspy({target:".secondary-menu-bar",rootMargin:"-100px 0px -75% 0px",threshold:[0]})});"use strict";class TabsAutomatic{static get INDEX_KEY(){return"tabIndex"}static get SELECTOR(){return"[data-ng-tablist='auto']"}constructor(n){var i,t,r;for(this.tablistNode=n,this.tabs=[],this.firstTab=null,this.lastTab=null,this.tabs=Array.from(this.tablistNode.querySelectorAll("[role=tab]")),this.tabpanels=[],i=0;i<this.tabs.length;i+=1)t=this.tabs[i],r=document.getElementById(t.getAttribute("aria-controls")),t.tabIndex=-1,t.setAttribute("aria-selected","false"),this.tabpanels.push(r),t.addEventListener("keydown",this.onKeydown.bind(this)),t.addEventListener("click",this.onClick.bind(this)),this.firstTab||(this.firstTab=t),this.lastTab=t;this.setSelectedTab(this.firstTab,!1,!1)}setSelectedTab(n,t,i){for(var r,u=0;u<this.tabs.length;u+=1)r=this.tabs[u],n===r?(r.setAttribute("aria-selected","true"),r.removeAttribute("tabindex"),this.tabpanels[u].classList.remove("hidden"),t&&r.focus(),i):(r.setAttribute("aria-selected","false"),r.tabIndex=-1,this.tabpanels[u].classList.add("hidden"))}setSelectedToPreviousTab(n){var t;n===this.firstTab?this.setSelectedTab(this.lastTab,!0,!0):(t=this.tabs.indexOf(n),this.setSelectedTab(this.tabs[t-1],!0,!0))}setSelectedToNextTab(n){var t;n===this.lastTab?this.setSelectedTab(this.firstTab,!0,!0):(t=this.tabs.indexOf(n),this.setSelectedTab(this.tabs[t+1],!0,!0))}onKeydown(n){var i=n.currentTarget,t=!1;switch(n.key){case"ArrowLeft":this.setSelectedToPreviousTab(i);t=!0;break;case"ArrowRight":this.setSelectedToNextTab(i);t=!0;break;case"Home":this.setSelectedTab(this.firstTab,!0,!0);t=!0;break;case"End":this.setSelectedTab(this.lastTab,!0,!0);t=!0}t&&(n.stopPropagation(),n.preventDefault())}onClick(n){this.setSelectedTab(n.currentTarget,!0,!0)}}window.addEventListener("load",function(){for(var t=document.querySelectorAll(TabsAutomatic.SELECTOR),n=0;n<t.length;n++)new TabsAutomatic(t[n]);adjustTablists()});window.adjustTopBar=function(){"use strict";var t=100,u=0,i=$(".top-bar .menu .content"),f=0,n=$(".top-bar .search-form .content"),r;$(window).width()<992?(r=i.first(),r.length>0&&(u=parseInt(r.css("padding-top"),10)+parseInt(r.css("padding-bottom"),10)),n.length>0&&(f=parseInt(n.css("padding-top"),10)+parseInt(n.css("padding-bottom"),10),n.height($(window).height()-$(".top-bar .icons").height()-f)),t=$(window).height()-$(".top-bar .icons").height()-u,i.height(t)):(n.length>0&&n.height(""),i.each(function(){t=Math.max(t,$(this).height())}),i.height(t))};$(function(){"use strict";function p(n,i){if(!i.hasClass("open")){t();l();n.addClass("open").attr("aria-expanded","true");c(i);u($(".top-bar .menu .level-1-content"));$("a, button",i).filter(":visible").first().trigger("focus");var f=$("#TopBarMenuButton").first(),e=$("a, button",".top-bar .menu .level-1-content").last();ng.util.trapFocusOn($(".top-bar"),f,e);i.on("keydown",function(n){n.keyCode===27&&r()});$("button",i).filter(":visible").on("blur",function(){var n=$(this),t,i;n.attr("aria-expanded")==="true"&&(t=n.data("open"),i=$(".top-bar").find("#"+t),$("a, button",i).filter(":visible").first().trigger("focus"))});$("a, button",i).filter(":visible").last().on("blur",function(){n.trigger("focus")})}}function r(){var n=$(".top-bar .menu.level-1"),t,i;n.hasClass("open")&&(e(n),n.find(".menu-item-wrapper").removeClass("active").removeClass("inactive"),t=$("#TopBarMenuButton"),t.removeClass("open").attr("aria-expanded","false"),i=$(".top-bar .menu.level-2"),e(i),a(),o(),ng.util.trapFocusOff($(".top-bar")),t.trigger("focus"))}function w(n,t){var r,i,f,e;if(!t.hasClass("open")){n.attr("aria-expanded","true");r=$(".top-bar .menu.level-2");r.removeClass("open");c(t);u(t);i=$(".top-bar .menu.level-1 .menu-item-wrapper");i.removeClass("active");i.addClass("inactive");n.parent().removeClass("inactive");n.parent().addClass("active");$(window).width()<992&&s($(".top-bar .menu .level-1-content"));$("a, button",t).filter(":visible").first().trigger("focus");$("a, button",t).filter(":visible").last().on("blur",function(){let t=n.parent().next().find("a, button");t&&t.trigger("focus")});f=$("#TopBarMenuButton").first();e=$("a, button",t).last();ng.util.trapFocusOn($(".top-bar"),f,e)}}function b(n,t){var i,r,f,o;t.hasClass("open")&&(n.attr("aria-expanded","false"),e(t),s(t),i=$(".top-bar .menu.level-1 .menu-item-wrapper"),r=i.filter(".active").first(),i.removeClass("active").removeClass("inactive"),$(window).width()<992&&u($(".top-bar .menu .level-1-content")),r.find("a, button").filter(":visible").first().trigger("focus"),f=$("#TopBarMenuButton").first(),o=$("a, button",".top-bar .menu .level-1-content").last(),ng.util.trapFocusOn($(".top-bar"),f,o))}function c(n){var t;window.matchMedia("(min-width: 992px)").matches?(n.css({left:""}),t={top:$(".top-bar").height()}):(n.css({top:""}),t={left:0});n.css({visibility:"visible"}).animate(t,300,function(){$(this).attr("aria-hidden","false").addClass("open")})}function e(n){var t;window.matchMedia("(min-width: 992px)").matches?(n.css({left:""}),t={top:"-100%"}):(n.css({top:""}),t={left:"-100%"});n.animate(t,300,function(){$(this).css({visibility:""}).attr("aria-hidden","true").removeClass("open")})}function k(n,i){var u,f,e;if(!i.hasClass("open")){r();l();n.addClass("open").attr("aria-expanded","true");i.addClass("open").attr("aria-hidden","false");d();u=i.find(".textbox");u.prop("autocomplete","off").trigger("focus").prop("autocomplete","on");f=$("#TopBarMenuButton").first();e=i.find(".submit-button");ng.util.trapFocusOn($(".top-bar"),f,e);i.on("keydown",function(n){n.keyCode===27&&t()})}}function t(){var t=$(".top-bar .search-form"),n;t.hasClass("open")&&(t.removeClass("open").attr("aria-hidden","true"),n=$("#TopBarSearchButton1"),n.removeClass("open").attr("aria-expanded","false"),a(),o(),ng.util.trapFocusOff($(".top-bar")),n.trigger("focus"))}function l(){$(".main").addClass("main-overlay");$(".main, footer").attr("aria-hidden","true")}function a(){$(".main").removeClass("main-overlay");$(".main, footer").removeAttr("aria-hidden")}function o(){s($(".top-bar .menu, .top-bar .search-form"))}function d(){u($(".top-bar .search-form"))}function s(n){n.find("a, button, input").attr("tabindex","-1")}function u(n){n.find("a, button, input").removeAttr("tabindex")}function g(){var n=new XMLHttpRequest;n.withCredentials=!0;n.overrideMimeType("application/json");n.open("GET",tNewApiSessionUrl,!0);n.send(null)}function nt(){v();setInterval(v,1e4)}function v(){if(h){if(y){i("JG",1,"M",4e6);return}i("",0,"",0);return}var t=ng.util.getCookie(sSharingCookieName);t==="Y"?n>0&&$.ajax({url:"/umbraco/Surface/Session/GetSessionState",cache:!1,type:"GET",success:function(t){if(t===null)i("",0,"",0),n=n-1;else{var r=t.isAuthenticated===!0,u=r?t.initials:"",f=t.constituentId!==undefined?+t.constituentId:0,e=r?t.membershipStatus:"",o=t.numberOfItemsInCart!==undefined?+t.numberOfItemsInCart:0;i(u,o,e,f);n=0}},error:function(){i("",0,"",0);n=n-1}}):i("",0,"",0)}function i(n,t,i,r){ng.util.setCookie(sDataInitials,n,0,"/");ng.util.setCookie(sDataBasketCount,t,0,"/");ng.util.setCookie(sDataMembershipStatus,i,0,"/");ng.util.setCookie(sDataUserId,r,0,"/");tt(n,t)}function tt(n,t){$(".sessionUserInitials").html(n);n===""?($(".top-bar .authenticated-user").hide(),$(".top-bar .anonymous-user").show()):($(".top-bar .anonymous-user").hide(),$(".top-bar .authenticated-user").show());t>0?($(".sessionUserBasketState").show(),$(".sessionUserBasketItemsCount").show()):($(".sessionUserBasketState").hide(),$(".sessionUserBasketItemsCount").hide());var i="";i+=n===""?"You are not signed in.":"You are signed in.";t>0&&(i+=" You have "+t+" item"+(t>1?"s":"")+" in your basket.");$(".top-bar #AccountStatusText").html(i)}var h=!1,y=!1,f,n;adjustTopBar();o();$(".secondary-menu-bar").length>0&&$(".top-bar").addClass("with-secondary-menu-bar");f=document&&document.location&&document.location.hostname&&document.location.hostname.indexOf("nationalgallery.org.uk")>-1;f&&$('[data-session-state="RequireTessSession"]').length>0&&g();n=5;(f||h)&&nt();$("#TopBarMenuButton").on("click",function(){var n=$(this),t=$(".top-bar .menu.level-1");n.hasClass("open")?r():p(n,t)});$(".top-bar .menu-opener").on("click",function(){var n=$(this),t=n.data("open"),i=$(".top-bar").find("#"+t);w(n,i)});$(".top-bar .menu-heading").on("click",function(){var n=$(this),t=n.closest(".menu");b(n,t)});$("#TopBarSearchButton1").on("click",function(){var n=$(this),i=$(".top-bar .search-form");n.hasClass("open")?t():k(n,i)});$(".top-bar .search-form .close-button").on("click",function(){t()});$(".top-bar .sign-in .dropdown-toggle").on("click",function(){t();r()});$(document).on("click",function(n){$(n.target).closest(".top-bar").length===0&&(t(),r())})});$(function(){$(".c-accordion .collapse").on("shown.bs.collapse",function(){var n=this.id.replace("-content",""),t=$(document).scrollTop();window.location.hash!=="#"+n&&(window.location.hash=n,$(document).scrollTop(t),$(this).parent().children(".c-accordion-item-heading").first().trigger("focus"))});$(".c-accordion .collapse").on("hide.bs.collapse",function(){var n=this.id.replace("-content",""),t=$(document).scrollTop();window.location.hash==="#"+n&&(window.location.hash="",$(document).scrollTop(t))})});$(function(){$(".c-membership-tailor").length>0&&MembershipComponents.InitTailor()}),function(n,t){let r={Level:'input[name="frmTailorLevel"]',Level_Curr:'input[name="frmTailorLevel"]:checked',Guests:'input[name="frmTailorGuests"]',Guests_Curr:'input[name="frmTailorGuests"]:checked',PaymentType:'input[name="frmTailorPaymentType"]',PaymentType_Curr:'input[name="frmTailorPaymentType"]:checked',TnC:'input[name="frmTailorTnC"]',TnC_Agreed:'input[name="frmTailorTnC"]:checked'},i={HouseLevel:100,ExhibitionLevel:50,FriendLevel:5,O:t(".c-membership-tailor").first(),ActionType:t(".c-membership-tailor").first().data("mTailorAction"),FriendOnlyDD:+t(".c-membership-tailor").first().data("mTailorFriendOnlyDd")==1,PaymentType:t(".c-membership-tailor").first().find('[data-m-tailor-panel="payment-type"]'),Summary:t(".c-membership-tailor").first().find('[data-m-tailor-panel="summary"]'),Levels:t(".c-membership-tailor").first().find('[data-m-tailor-panel="membership-level"]').find(r.Level).map(function(){return t(this).val()}).get()};n.CanProceed=function(){let n=i.Summary.find(".btn-next"),t=i.ActionType==="Gift"||i.ActionType!=="Gift"&&i.Summary.find(r.TnC_Agreed).length>0;t?(n.attr("disabled",!1),i.O.find(".summary-status").html("You can now proceed with purchase - clik on the Continue button.")):(n.attr("disabled",!0),i.O.find(".summary-status").html(""))};n.Summary_Refresh=function(){if(i.ActionType!=="Activate"){let n=i.O.find(r.Level_Curr),u=i.O.find(r.Guests_Curr),f=i.O.find(r.PaymentType_Curr).val(),e=f==="DirectDebit"?n.data("mTailorCostDd"):n.data("mTailorCostCc"),o=u.data("mTailorCost");f==="DirectDebit"?i.Summary.find(".dd-upsell-msg").hide():+n.val()===i.FriendLevel?i.Summary.find(".dd-upsell-msg").hide():i.Summary.find(".dd-upsell-msg").show();t("#m-tailor-summary-product").html(n.data("mTailorLabel"));t("#m-tailor-summary-product-cost").html("£"+e);t("#m-tailor-summary-guest").html(u.data("mTailorLabel"));t("#m-tailor-summary-guest-cost").html("£"+o);t("#m-tailor-summary-total").html("£"+(e+o))}};n.AdjustGuestNumbers=function(n){i.O.find(r.Guests).each(function(){let i=t(this).data("mTailorMinLevel");+i<=+n?t(this).prop("disabled",!1):t(this).prop("disabled",!0)})};n.AdjustPaymentPanel=function(n){(i.ActionType==="Join"||i.ActionType==="Renew")&&(i.PaymentType.find(".pt-dynamic-area").hide(),i.PaymentType.find(".pt-area-"+n).show(),+n===i.HouseLevel?i.O.find(r.PaymentType+'[value="DirectDebit"]').trigger("click"):i.FriendOnlyDD&&+n===i.FriendLevel?i.O.find(r.PaymentType+'[value="DirectDebit"]').trigger("click"):+n===i.FriendLevel?i.PaymentType.find(".dd-saving-msg").hide():i.PaymentType.find(".dd-saving-msg").show())};n.AdjustLevelRbVisibility=function(n){i.O.find(r.Level).each(function(){let u=t(this).val(),r=t(this).parent();+u<+n?t(r).removeClass("expanded-card").addClass("collapsed-card"):+u==+n?t(r).removeClass("collapsed-card").addClass("expanded-card"):i.Levels.indexOf(n)+1==i.Levels.indexOf(u)?t(r).removeClass("collapsed-card").addClass("expanded-card"):t(r).removeClass("expanded-card").addClass("collapsed-card")})};n.ValueChanged_Level=function(){let t=i.O.find(r.Level_Curr).val();n.AdjustLevelRbVisibility(t);let u=i.O.find(r.Guests_Curr).data("mTailorMinLevel");+u>+t&&i.O.find(r.Guests+'[value="0"]').trigger("click");n.AdjustGuestNumbers(t);n.AdjustPaymentPanel(t);n.Summary_Refresh();n.CanProceed()};n.InitTailor=function(){i.O.find(r.TnC).on("change",function(){n.CanProceed()});i.O.find(r.Guests).on("change",function(){n.Summary_Refresh();n.CanProceed()});i.O.find(r.PaymentType).on("change",function(){n.Summary_Refresh();n.CanProceed()});i.O.find(r.Level).on("change",function(){n.ValueChanged_Level()});i.Summary.find("button").on("click",function(n){n.preventDefault();let u=t(this).attr("disabled");if(typeof u=="undefined"){let t='[data-m-tailor-l="'+i.O.find(r.Level_Curr).val()+'"]',u='[data-m-tailor-p="'+i.O.find(r.PaymentType_Curr).val()+'"]',f='[data-m-tailor-g="'+i.O.find(r.Guests_Curr).val()+'"]',n=i.O.find("#m-tailor-urls input"+t+u+f).val();i.ActionType==="Renew"&&i.O.find(r.Level_Curr).val()==="50"&&i.O.find(r.PaymentType_Curr).val()==="CreditCard"&&(n="https://my.nationalgallery.org.uk/account/login?returnurl="+encodeURIComponent(n));window.location=n}});setTimeout(function(){let t=i.O.find(r.Level_Curr).val();n.AdjustLevelRbVisibility(t);n.AdjustGuestNumbers(t);n.AdjustPaymentPanel(t);n.Summary_Refresh();n.CanProceed()},200)}}(window.MembershipComponents=window.MembershipComponents||{},jQuery);$(function(){"use strict";function t(){$(".c-video-player").each(function(){i($(this))})}function i(t){if(Cookiebot&&Cookiebot.consent&&Cookiebot.consent.marketing){t.find(".message-container").hide();t.find(".video-component-ui").show();var i=$(".playlist-controls-area",t);i.length>0&&ng.element.cardSlider.Init($(".ng-carousel",i),function(){var r=$(".ng-card-wrap.selected .ng-card",i);n(t,r,!1)})}else t.find(".message-container .loading-message").hide(),t.find(".message-container .cookie-message").show()}function n(n,t,i){var f=t.attr("data-video-id"),e=$(".player .frame",n);r(e,f,i);u(n,t)}function r(n,t,i){var r=n.attr("src");r=r.replace(/embed\/.*\?/,"embed/"+t+"?");r.indexOf("autoplay=")===-1?r+="&autoplay="+(i?"1":"0"):r=r.replace(/autoplay=./,"autoplay="+(i?"1":"0"));n.attr("src",r)}function u(n,t){var i=t.attr("data-video-duration"),r=t.attr("data-video-title");$(".video-info .duration",n).text(i);$(".video-info .title",n).text(r)}function f(){$(".c-video-player").each(function(){var t=$(this),i=$(".playlist-controls-area",t);i.length>0&&n(t,$(".ng-card-wrap .ng-card",i).first(),!1)})}$(".c-video-player .adjust-cookie-preferences").on("click",function(){Cookiebot&&(Cookiebot.renew(),window.addEventListener("CookiebotOnAccept",function(){location.reload()},!1))});t();window.adjustVideoPlayer=f})