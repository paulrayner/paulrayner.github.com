# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Repository Overview

This is a Jekyll-based static website hosted on GitHub Pages for Paul Rayner's technical blog "Leading by Design". The site focuses on software design, domain-driven design (DDD), agile practices, and related topics.

## Branch Structure

- **jekyll branch**: Source files for Jekyll (work here)
- **main branch**: Generated HTML served by GitHub Pages (do not edit directly)

## Architecture and Structure

### Site Generator
- **Jekyll 4.3**: Modern static site generator
- **GitHub Pages**: Automatically builds from jekyll branch and serves result
- **Kramdown**: Markdown processor with GitHub-flavored Markdown support
- **Rouge**: Modern syntax highlighter

### Content Structure  
- **New Posts**: Write in `_posts/` as Markdown files (`YYYY-MM-DD-title.md`)
- **Legacy Posts**: Historical content preserved in `/legacy/` as static files
- **Layouts**: HTML templates in `_layouts/`
- **Includes**: Reusable components in `_includes/`
- **Assets**: All images, PDFs, and other media in `/assets/` directory
- **Styling**: SASS files in `_sass/` with main file at `/css/main.scss`

## Common Development Tasks

### Creating New Blog Posts
1. **Create new file**: `_posts/YYYY-MM-DD-title.md`
2. **Use frontmatter**:
   ```yaml
   ---
   layout: post
   title: "Your Post Title"
   date: YYYY-MM-DD HH:MM:SS -0600
   tags: [Tag1, Tag2, Tag3]
   excerpt: Brief description for homepage and RSS
   ---
   ```
3. **Write in Markdown**: Standard GitHub-flavored Markdown syntax

### Local Development
```bash
bundle install          # Install dependencies
bundle exec jekyll serve --watch --drafts  # Local development server
bundle exec jekyll build  # Build site to _site/
```

### Deployment
- **Standard GitHub Pages**: Push to `jekyll` branch, GitHub builds automatically
- **No custom scripts**: Removed legacy Travis CI and build.sh infrastructure
- **Safe process**: GitHub's Jekyll build won't delete existing content

### Content Management
- **New posts**: Use Markdown format in `_posts/`
- **Images**: Place in `/assets/` with logical subdirectories
- **URL structure**: `/blog/YYYY/MM/DD/title/` (maintained from legacy)
- **Tags**: Automatic tag pages generated by Jekyll

## Legacy Content Protection

- **Historical posts**: Preserved as static HTML in `/legacy/` directory
- **URL compatibility**: All existing links continue to work
- **No regeneration**: Legacy posts are served as-is, never rebuilt
- **Safe builds**: Jekyll includes legacy content without processing it

## Key Features

### Modern Jekyll Workflow
- **Jekyll 4.3**: Latest stable version with modern features
- **Markdown support**: Write posts in standard Markdown
- **Automatic deployment**: GitHub Pages handles the build process
- **Feed generation**: RSS feed automatically updated
- **Sitemap**: Automatic sitemap generation for SEO

### Content Organization
- **Chronological posts**: Traditional blog structure with date-based URLs  
- **Topic-based tags**: Comprehensive tagging system (DDD, Design, Agile, etc.)
- **Rich media**: Extensive use of images, diagrams, and downloadable resources
- **Legacy preservation**: All historical content maintained

## Important Notes

- **Work in jekyll branch**: All development happens here
- **GitHub Pages deployment**: Push to jekyll branch triggers automatic build
- **Legacy content safe**: Historical posts are preserved and never regenerated
- **Markdown workflow**: New posts use standard Markdown syntax
- **No custom build scripts**: Uses standard GitHub Pages Jekyll processing